{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block title %}首页-HUSTRunner{% endblock %}

{% block page_content %}
<div class="row">
    <!--left-->
    <div class="col-md-8">
        <div id="post-bar">
            <div style="float:right">
                <a href="{{ url_for('forum.new_post') }}">发帖</a>
            </div>
            <div class="topic-tab">
                <a href="/">最近话题</a>
                <i>/</i>
                <a href="/?type=essence">最热话题</a>
            </div>
        </div>
        {% for post in posts %}
        <hr>
        <h4><a href="{{ url_for('forum.view_post', slug=post.slug) }}">{{ post.title }}</a></h4>
        <ul class="post-info" style="padding:0">
            <li>
                <i class="fa fa-user"></i>
                <a href="{{ url_for('user.profile', username=post.author.username) }}">{{ post.author.username }}</a>
            </li>
            <li><i class="fa fa-comment"></i>回应 {{ post.comments.count() }}</li>
            <li><i class="fa fa-calendar"></i>{{ moment(post.date_created).fromNow() }}</li>
            <li>浏览 {{ post.views }}</li>
        </ul>
        <div class="post-body">
            {{ post.content_html|safe|truncate(100) }}
        </div>
        {% endfor %}
        {% if pagination.has_prev or pagination.has_next %}
        <div class="pagination">
            {{ macros.pagination_widget(pagination, '.index') }}
        </div>
        {% endif %}
    </div>
    <!--right-->
    <div class="col-md-4">
        <div class="panel panel-default panel-widget">
            <div class="panel-heading panel-widget-heading">
                <h3 class="panel-title">森林公园夜跑</h3>
            </div>
            <div class="panel-body panel-widget-body">
                <p>晚上9点半，韵苑路口集合</p>
            </div>

        </div>
    </div>
</div>
{% endblock %}